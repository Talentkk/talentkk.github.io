---
title: AGC056D
date: 2021/12/7
description: 　
---

给 $n$ 个数 $a_i$ ，$n$ 是偶数。Alice和Bob轮流取数，Alice先手。记所有数取完后，Alice手上所有数的和是 $s$ ，则当 $l\leq s\leq r$ 时Alice获胜，否则Bob获胜。求两人决策最优下，谁能获胜。

$2\leq n\leq 5000,1\leq a_i\leq 10^9$

结论：若存在 $x,y\in[1,n],x\neq y$ ，并将所有 $i\neq x,i\neq y$ 的 $a_i$ 排序，得到 $b_1,b_2,...,b_{n-2}$ ，使得$l\leq a_x+b_1+b_3+...+b_{n-3},a_x+b_2+b_4+...+b_{n-2}\leq r$ ，则Alice胜，否则Bob胜。

感性理解下很对。

证明：

1. 当满足条件时Alice存在必胜策略。

   将所有数进行分组：$a_x,a_y,(b_1,b_2),(b_3,b_4),...,(b_{n-3},b_{n-2})$ 。Alice先拿 $a_x$ ，在后面的回合中：

   + 若Bob拿了 $a_y$ ，则Alice任选一个未被取过数的组，并取走其中一个。
   + 若Bob拿走了某个 $b$ ，且拿走后这组内的数都被取完，则任选一个未被取过数的组，并取走其中一个。
   + 若Bob拿走了某个 $b$ ，且拿走后这组内的数未被取完，则这组中取剩下的数。

   对于这样的策略，Alice总可以选到 $a_x$ ，并在每组 $b$ 中恰好选一个数。根据上面的条件，Alice获胜。

2. 当不满足条件时Bob存在必胜策略。

   数学归纳法证明，具体参照官方题解。