---
title: AGC056C
date: 2021/12/6
description: 　
---

你需要输出一个长度为 $n$ 的 $01$ 序列，满足 $m$ 个限制 $l_i,r_i$ ，表示在 $[l_i,r_i]$ 中的 $01$ 个数相同，若有多种答案输出字典序最小的，保证至少有一组解。

 $2\leq n\leq 10^6,1\leq m\leq200000$

考虑转化问题，记 $p_i$ 为 $i$ 这个前缀中，$1$ 的个数减 $0$ 的个数，则一个限制 $l_i,r_i$ 就相当于 $p_{l_i-1}=p_{r_i}$ 。观察 $p$ 和 $s$ 的关系，发现要使得 $s$ 的字典序最小，就是要使 $p$ 的字典序最小，问题转化为求满足以下条件的 $p$ ：

+ $p$ 的字典序最小
+ $p_{l_i-1}=p_{r_i}$
+ $p_0=0,|p_i-p_{i-1}|=1$

容易发现第三个条件等价于：$p_0=0,|p_i-p_{i-1}|\leq 1$ ，因为在 $p$ 字典序最小的情况下，不可能会有 $p_i=p_{i-1}$ 。然后就变成了经典的差分约束问题。时间复杂度 $O(n+m)$ 。