---
title: ABC219H
date: 2021/12/17
description: 　
---

在坐标轴上有 $n$ 个点分别位于 $x_1,x_2,...,x_n$ ，第 $i$ 个点有权值 $a_i$ 。一个人 $0$ 时刻在 $0$ ，每个单位时间可以向左或向右走一步，设他与第 $i$ 个点相遇的时间是 $t_i$ ，则这样的代价是：
$$
\sum_{i=1}^{n}{\max(0,a_i-t_i)}
$$
求代价的最大值。

$1\leq n\leq 300,-10^9\leq x\leq 10^9,1\leq a_i\leq 10^9$

先将所有点排序。

一种简单的想法是 $dp(l,r,x,0/1)$ 表示当最左与第 $l$ 个点相遇，最右与第 $r$ 个点相遇，当前的时间为 $x$ ，在左边还是右边，的最大代价，但显然无法通过。

考虑当 $a_i$ 足够大时怎么做（即每个 $i$ 的贡献都不为 $0$）。由于没有 $\max$ 符号，我们把 $-t_i$ 的代价拆到每一步上。令一开始的初始代价是 $\sum a_i$，设当前还有 $c$ 个点没有被相遇，那么这个人每走一步就会减少 $c$ 的代价，于是可以设 $dp(l,r,0/1)$ 表示最左与第 $l$ 个点相遇，最右与第 $r$ 个点相遇，在左边还是右边，的最大代价，那么 $c=r-l+1$ ，可以直接转移。

回到原问题，受到特殊情况的启发，我们设 $dp(l,r,x,0/1)$ 表示最左与第 $l$ 个点相遇，最右与第 $r$ 个点相遇，**钦定后面会遇到** $x$ 个 $\max(a_i-t_i,0)$ 不为 $0$ 的 ，在左边还是右边，的最大代价。转移时直接枚举往左还是往右扩展即可，时间复杂度 $O(n^3)$ 。

