---
title: CF1614E
date: 2021/11/28 
description: 　
---

给定 $n$ 天的气温 $T_i$ ，设第 $i$ 天温度为 $P$ ，则第 $i+1$ 天的温度为：

- $P+1 ( P<T_i)$
- $P-1 ( P>T_i )$
- $P ( P=T_i )$

对第 $i$ 天有 $k_i$ 个询问，问若第 $0$ 天的温度为 $x$ ，那么第 $i$ 天的温度是多少。

强制在线。

$1\leq n\leq 2\times 10^5, \sum k_i\leq 2\times 10^5,0\leq T_i,x\leq 10^9$

若设 $f(x)$ 表示初始温度为 $x$ 时，当前的温度，可以发现 $f(x)$ 是单调的。

所以直接用动态开点线段树维护 $f(x)$ ，对于每次的修改操作，直接二分出最大的 $x$ 满足 $f(x)<T_i$ 和最小的 $y$ 满足 $f(x)>T_i$ ，然后对 $[0,x]$ 区间加一， $[y,10^9]$ 区间减一即可。
